<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="logger">
	<resultMap id="LoggerResult" class="com.wutianyi.logger.dataobject.LoggerDO">
		<result column="id" property="id" jdbcType="BIGINT" />
		<result column="gmt_create" property="gmtCreate" jdbcType="TIMESTAMP" />
		<result column="gmt_modified" property="gmtModified" jdbcType="TIMESTAMP" />
		<result column="old_value" property="oldValue" jdbcType="VARCHAR" />
		<result column="new_value" property="newValue" jdbcType="VARCHAR" />
		<result column="operation_type" property="operationType"
			jdbcType="VARCHAR" />
		<result column="operator" property="operator" jdbcType="VARCHAR" />
	</resultMap>

	<sql id="query_clause">
		<dynamic prepend="where">
			<isNotNull property="id" prepend="and">
  			<![CDATA[id = #id:BIGINT#]]>
  			</isNotNull>
			<isNotNull property="gmtCreateBeginDate"
				prepend="and">
  			<![CDATA[gmt_create >= #gmtCreateBeginDate:DATETIME#]]>
  			</isNotNull>
			<isNotNull property="gmtCreateEndDate"
				prepend="and">
  			<![CDATA[gmt_create <= #gmtCreateEndDate:DATETIME#]]>
  			</isNotNull>
			<isNotNull property="operationType"
				prepend="and">
  			<![CDATA[operation_type = #operationType:VARCHAR#]]>
  			</isNotNull>
			<isNotNull property="operator" prepend="and">
  			<![CDATA[operator = #operator:VARCHAR#]]>
  			</isNotNull>
		</dynamic>
	</sql>

	<select id="findLoggerById" parameterClass="java.lang.Integer" resultMap="LoggerResult">
		<![CDATA[
			select id, gmt_create, gmt_modified, old_value, new_value, operation_type, operator from logger
			where id = #id:BIGINT#
		]]>
	</select>
	
	<select id="listLoggerByLoggerQuery" resultMap="LoggerResult" parameterClass="com.wutianyi.logger.query.LoggerQuery">
		<![CDATA[
			select id, gmt_create, gmt_modified, old_value, new_value, operation_type, operator from logger
		]]>
		<isParameterPresent>
			<include refid="query_clause"/>
		</isParameterPresent>
	</select>

	<insert id="insert_logger" parameterClass="com.wutianyi.logger.dataobject.LoggerDO">
		<!--
			WARNING - This element is automatically generated by Abator for
			iBATIS, do not modify. This element was generated on Mon Apr 18
			10:49:55 CST 2011.
		-->
		insert into logger (gmt_create, gmt_modified, old_value,
		new_value, operation_type,
		operator)
		values (#gmtCreate:TIMESTAMP#, #gmtModified:TIMESTAMP#,
		#oldValue:VARCHAR#,
		#newValue:VARCHAR#, #operationType:VARCHAR#, #operator:VARCHAR#)
	</insert>
</sqlMap>